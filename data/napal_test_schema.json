{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NAPAL Test Schema",
  "description": "Schema for NAPAL Year 3 test questions and answers",
  "type": "object",
  "properties": {
    "test_metadata": {
      "type": "object",
      "properties": {
        "test_id": {
          "type": "string",
          "description": "Unique identifier for the test"
        },
        "year": {
          "type": "integer",
          "description": "Year the test was created"
        },
        "grade_level": {
          "type": "string",
          "enum": ["Year 3"],
          "description": "Target grade level"
        },
        "subject_areas": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["reading_comprehension", "vocabulary", "writing", "language_conventions"]
          },
          "description": "NAPAL literacy domains covered"
        },
        "total_questions": {
          "type": "integer",
          "description": "Total number of questions in the test"
        },
        "estimated_duration_minutes": {
          "type": "integer",
          "description": "Estimated time to complete the test"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "When the test was generated"
        }
      },
      "required": ["test_id", "year", "grade_level", "subject_areas", "total_questions"]
    },
    "questions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "question_id": {
            "type": "string",
            "description": "Unique identifier for the question"
          },
          "question_type": {
            "type": "string",
            "enum": ["multiple_choice", "short_answer", "extended_response", "cloze", "matching"],
            "description": "Type of question"
          },
          "subject_area": {
            "type": "string",
            "enum": ["reading_comprehension", "vocabulary", "writing", "language_conventions"],
            "description": "NAPAL literacy domain"
          },
          "difficulty_level": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "description": "Difficulty rating (1=easiest, 5=hardest) for Year 3"
          },
          "learning_objective": {
            "type": "string",
            "description": "Specific learning objective being assessed"
          },
          "stimulus": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["text", "image", "audio", "video", "none"],
                "description": "Type of stimulus material"
              },
              "content": {
                "type": "string",
                "description": "The stimulus content (text, file path, etc.)"
              },
              "title": {
                "type": "string",
                "description": "Title of the stimulus material"
              }
            },
            "description": "Stimulus material for the question"
          },
          "question_text": {
            "type": "string",
            "description": "The actual question text"
          },
          "options": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "option_id": {
                  "type": "string",
                  "description": "Identifier for the option (A, B, C, D)"
                },
                "text": {
                  "type": "string",
                  "description": "Option text"
                }
              },
              "required": ["option_id", "text"]
            },
            "description": "Answer options for multiple choice questions"
          },
          "correct_answer": {
            "type": "object",
            "properties": {
              "answer": {
                "type": "string",
                "description": "The correct answer or acceptable answer"
              },
              "explanation": {
                "type": "string",
                "description": "Explanation of why this is the correct answer"
              },
              "acceptable_variations": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Alternative acceptable answers or phrasings"
              }
            },
            "required": ["answer"]
          },
          "scoring_rubric": {
            "type": "object",
            "properties": {
              "points_possible": {
                "type": "integer",
                "description": "Maximum points for this question"
              },
              "scoring_criteria": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "points": {
                      "type": "integer",
                      "description": "Points awarded for this level"
                    },
                    "criteria": {
                      "type": "string",
                      "description": "Description of what earns this point level"
                    }
                  }
                }
              }
            },
            "required": ["points_possible"]
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional tags for categorization"
          }
        },
        "required": ["question_id", "question_type", "subject_area", "difficulty_level", "question_text", "correct_answer", "scoring_rubric"]
      }
    }
  },
  "required": ["test_metadata", "questions"]
}